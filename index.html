<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê²°í˜¼ ì‹¬ë¦¬ ê¶í•© í…ŒìŠ¤íŠ¸</title>
  <style>
    body { font-family: 'Segoe UI', 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif; background: #f7f9fb; color: #21242b; padding: 2rem; max-width: 820px; margin: auto; }
    h1, h2, h3 { text-align: center; margin-bottom: 1.2rem; }
    h1 { font-size:2.1rem; font-weight:bold; letter-spacing:-2px;}
    nav { display: flex; justify-content: space-around; margin-bottom: 2.3rem; gap:1.05rem; }
    nav button {
      flex:1;
      min-width:130px;
      padding: 1.1rem 0.6rem;
      border: none;
      border-radius: 1.2rem;
      font-weight: bold;
      font-size: 1.15rem;
      letter-spacing: -1.1px;
      color: #fff;
      box-shadow: 0 2px 12px rgba(0,0,0,0.12);
      cursor: pointer;
      transition: transform .11s, background .14s, color .09s;
      margin-bottom: .7rem;
      outline: none;
    }
    nav button[data-target="jung"] { background: linear-gradient(90deg,#4777f3,#3653e2);}
    nav button[data-target="attachment"] { background: linear-gradient(90deg,#22c994,#36e29a);}
    nav button[data-target="color"] { background: linear-gradient(90deg,#f29d3a,#f37636);}
    nav button[data-target="summary"] { background: linear-gradient(90deg,#f376b8,#c336e2);}
    nav button.active, nav button:focus { transform: scale(1.08); box-shadow: 0 2px 18px rgba(44,62,80,.18);}
    section { display: none; }
    .active { display: block; }
    .button {
      padding: 1.2rem;
      width: 100%;
      background: #4777f3;
      color: #fff;
      border: none;
      border-radius: 1.15rem;
      cursor: pointer;
      font-size: 1.15rem;
      font-weight: bold;
      margin-top:.7rem;
      margin-bottom:.23rem;
      box-shadow: 0 1px 6px rgba(44,62,80,.11);
      letter-spacing: -1.2px;
      transition: background .11s, transform .09s;
    }
    .button:active { background: #3450c8;}
    .restart { margin-top: 1.1rem; background: #888; }
    .result-deck {
      display: flex; flex-direction:column; gap:1.8rem;
      margin-top:2.3rem;
      margin-bottom:1.7rem;
    }
    .result-card {
      padding: 2rem 1.7rem 1.4rem 1.7rem;
      border-radius: 1.15rem;
      background: #fff;
      box-shadow: 0 4px 24px rgba(60,55,120,0.12), 0 1px 0 #ececec;
      border: 1.7px solid #f0f2f7;
      margin-top: 0;
      display: flex; flex-direction:column; align-items:flex-start; gap:.7em;
      position:relative;
      min-height: 170px;
    }
    .result-card .card-icon { position:absolute; right:2.1rem; top:2.3rem; font-size:2.3em; opacity:.17;}
    .result-card h3 {
      font-size:1.35em;
      font-weight:bold;
      letter-spacing:-1px;
      margin-bottom:.3em;
      color: #2a3358;
      margin-top: 0;
      border-bottom: 1px solid #ececec;
      padding-bottom: 0.33em;
      width:100%;
      background:linear-gradient(90deg,#e5eaff,#fff);
      border-radius:.6em .6em 0 0;
    }
    .type-em { font-size:1.18em; font-weight: bold; letter-spacing:.2px; margin-bottom:.4em;}
    .type-good { color:#13b669; font-weight: bold; font-size: 1.08em;}
    .type-info { margin: 0.2em 0 0.5em 0; }
    .final-msg {
      text-align:center;
      margin-top:2.2em;
      font-size:1.23em;
      font-weight:bold;
      color:#43417c;
      letter-spacing:-1.2px;
      background:linear-gradient(90deg,#f7e5ff 60%,#e5f8ff 100%);
      border-radius:1em;
      box-shadow:0 2px 24px rgba(180,120,220,0.09);
      padding:1.6em 0.7em 1.3em 0.7em;
      border:1.5px solid #e7e0f7;
    }
    .result-card ul { margin: 0.4em 0 0.5em 1.1em; }
    .question { margin-bottom: 2.4rem; }
    .question label {
      display: block;
      margin-bottom: .65rem;
      font-weight: 700;
      font-size: 1.19rem;
      line-height: 1.45;
      color: #24292f;
      word-break: keep-all;
    }
    .scale-labels {
      display: flex;
      justify-content: space-between;
      font-size: 1.06rem;
      color: #191919;
      margin: .65rem 0 .8rem 0;
      font-weight: 700;
      letter-spacing: -1px;
      text-shadow:0 1px 0 #fff6;
    }
    .radio-group { display: flex; justify-content: space-between; gap: .5rem; }
    .radio-group input[type=radio] { display: none; }
    .radio-group label {
      flex: 1; text-align: center; padding: .53rem 0; border: 1.5px solid #ccc; border-radius: .6rem;
      cursor: pointer; background: #fff; transition: background .1s, color .1s, border .1s;
      font-weight: bold; font-size:1.09rem;
    }
    .radio-group input:checked + label { background: #4461f2; color: #fff; border: 2.5px solid #4461f2; }
    .color-circle { display: inline-block; width: 2rem; height: 2rem; border-radius: 50%; margin-right: .5rem; vertical-align: middle; }
  </style>
</head>
<body>
  <h1>ğŸ’ ê²°í˜¼ ì‹¬ë¦¬ ê¶í•© í…ŒìŠ¤íŠ¸</h1>
  <nav>
    <button data-target="jung" class="active">ğŸŒ€ ì¹¼ ìœµì˜ ì›í˜• ë¶„ì„</button>
    <button data-target="attachment">ğŸ”— ì• ì°© ìœ í˜• ë¶„ì„</button>
    <button data-target="color">ğŸ¨ ìƒ‰ê¹” ê¶í•© ë¶„ì„</button>
    <button data-target="summary">ğŸŒŸ ì¢…í•© ê²°ê³¼</button>
  </nav>

  <!-- ì¹¼ ìœµ í…ŒìŠ¤íŠ¸ -->
  <section id="jung" class="active">
    <h2>ì¹¼ ìœµì˜ ì›í˜• ë¶„ì„</h2>
    <form id="surveyFormJung">
      <div id="questionsJung"></div>
      <div id="bonusJung"></div>
      <button type="submit" class="button">ì œì¶œ</button>
    </form>
    <button id="restartJung" class="button restart" style="display:none;">ë‹¤ì‹œí•˜ê¸°</button>
  </section>

  <!-- ì• ì°© ìœ í˜• í…ŒìŠ¤íŠ¸ -->
  <section id="attachment">
    <h2>ì• ì°© ìœ í˜• ë¶„ì„</h2>
    <form id="surveyFormAttach">
      <div id="questionsAttach"></div>
      <button type="submit" class="button">ì œì¶œ</button>
    </form>
    <button id="restartAttach" class="button restart" style="display:none;">ë‹¤ì‹œí•˜ê¸°</button>
  </section>

  <!-- ìƒ‰ê¹” ê¶í•© í…ŒìŠ¤íŠ¸ -->
  <section id="color">
    <h2>ìƒ‰ê¹” ê¶í•© ë¶„ì„</h2>
    <form id="surveyFormColor">
      <div class="question"><label>ë‚˜ì˜ ìƒ‰ê¹” ì„ íƒ</label><div id="myColorGroup" class="radio-group"></div></div>
      <div class="question"><label>ì´ìƒí˜•ì˜ ìƒ‰ê¹” ì„ íƒ</label><div id="idealColorGroup" class="radio-group"></div></div>
      <button type="submit" class="button">ì œì¶œ</button>
    </form>
    <button id="restartColor" class="button restart" style="display:none;">ë‹¤ì‹œí•˜ê¸°</button>
  </section>

  <!-- ìµœì¢… ê²°ê³¼ -->
  <section id="summary">
    <h2>ğŸŒŸ ì¢…í•© ê²°ê³¼</h2>
    <div id="summaryResult"></div>
    <button id="resetAll" class="button restart">ì²˜ìŒìœ¼ë¡œ</button>
  </section>

  <script>
    // ê¶í•©í‘œ
    const jungMatch = {
      king: { best: "ì—°ì¸(ğŸ’), ë§ˆë²•ì‚¬(ğŸ§™)", reason: "ê°ì •ê³¼ ì°½ì˜ì„±ì˜ ê· í˜•ìœ¼ë¡œ ì¡°í™”ë¡œìš´ ê´€ê³„ë¥¼ ë§Œë“­ë‹ˆë‹¤." },
      warrior: { best: "ë§ˆë²•ì‚¬(ğŸ§™), ì—°ì¸(ğŸ’)", reason: "ë„ì „+ì§€ì  êµë¥˜, ê°ì„±ì˜ ì¡°í™”ê°€ ì˜ ë§ìŠµë‹ˆë‹¤." },
      lover: { best: "ì™•(ğŸ‘‘), ì „ì‚¬(âš”ï¸)", reason: "ë¦¬ë”ì‹­Â·ì‹¤í–‰ë ¥ê³¼ ê°ì„±ì´ ì‹œë„ˆì§€ íš¨ê³¼ë¥¼ ëƒ…ë‹ˆë‹¤." },
      magician: { best: "ì „ì‚¬(âš”ï¸), ì™•(ğŸ‘‘)", reason: "ì‹¤í–‰ë ¥/ë¦¬ë”ì‹­ê³¼ ì°½ì˜ì„±ì´ ë§Œë‚œ ì¢‹ì€ ì¡°í•©ì…ë‹ˆë‹¤." }
    };
    const attachMatch = {
      secure: { best:"ë¶ˆì•ˆí˜•(ğŸ˜°), ì•ˆì •í˜•(ğŸ˜Œ)", reason:"ìƒëŒ€ì˜ ë¶ˆì•ˆì„ ì•ˆì •ì‹œì¼œì£¼ëŠ” ë“ ë“ í•œ ê´€ê³„ê°€ ë©ë‹ˆë‹¤." },
      anxious: { best:"ì•ˆì •í˜•(ğŸ˜Œ)", reason:"ì•ˆì •í˜•ì˜ ë°°ë ¤ë¡œ ë§ˆìŒì˜ í‰í™”ë¥¼ ì°¾ìŠµë‹ˆë‹¤." },
      avoidant: { best:"ì•ˆì •í˜•(ğŸ˜Œ)", reason:"ë¶€ë“œëŸ½ê³  ì—¬ìœ  ìˆëŠ” ìƒëŒ€ê°€ ê´€ê³„ë¥¼ í¸ì•ˆí•˜ê²Œ ë§Œë“­ë‹ˆë‹¤." }
    };

    // íƒ­ í‘œì‹œ + ë²„íŠ¼ active ìŠ¤íƒ€ì¼
    const navButtons = document.querySelectorAll('nav button');
    navButtons.forEach(btn => btn.addEventListener('click', () => {
      navButtons.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      document.getElementById(btn.dataset.target).classList.add('active');
    }));
    navButtons[0].click();

    const results = { jung:null, attachment:null, color:null, jungKey:null, attachKey:null };

    // ì¹¼ ìœµ í…ŒìŠ¤íŠ¸
    (function(){
      const qJ = [
        {t:"ë‚˜ëŠ” ì–´ë–¤ ëª¨ì„ì´ë“  ìì—°ìŠ¤ëŸ½ê²Œ ì¤‘ì‹¬ì´ ë˜ê±°ë‚˜ ë¦¬ë” ì—­í• ì„ ë§¡ëŠ” í¸ì´ë‹¤.",g:"king"},
        {t:"ë‚˜ëŠ” ë‚´ ì£¼ë³€ ì‚¬ëŒë“¤ì˜ ì‚¶ì´ ì•ˆì •ë˜ë„ë¡ ë•ëŠ” ê²ƒì„ ì¤‘ìš”í•˜ê²Œ ìƒê°í•œë‹¤.",g:"king"},
        {t:"ë‚˜ëŠ” ê³„íšì„ ì„¸ìš°ê³  ê·¸ ê³„íšëŒ€ë¡œ ì¼ì´ ì§„í–‰ë˜ë„ë¡ ê´€ë¦¬í•˜ëŠ” ê±¸ ì¦ê¸´ë‹¤.",g:"king"},
        {t:"ë‚˜ëŠ” ëª©í‘œë¥¼ ì •í•˜ë©´ ëê¹Œì§€ í•´ë‚´ê³  ì‹¶ì–´ì§€ëŠ” ì„±ê²©ì´ë‹¤.",g:"warrior"},
        {t:"ìœ„ê¸°ì˜ ìˆœê°„ì—ë„ ì¹¨ì°©í•˜ê²Œ ëŒ€ì‘í•˜ê±°ë‚˜ ì ê·¹ì ìœ¼ë¡œ ë‚˜ì„œëŠ” í¸ì´ë‹¤.",g:"warrior"},
        {t:"ê²½ìŸì´ ìˆëŠ” ìƒí™©ì—ì„œ ì˜¤íˆë ¤ ë” ì—ë„ˆì§€ê°€ ì†ŸëŠ” í¸ì´ë‹¤.",g:"warrior"},
        {t:"ë‚˜ëŠ” ì‚¬ì†Œí•œ ê°ì •ì˜ ë³€í™”ë‚˜ ë¶„ìœ„ê¸°ë¥¼ ì˜ ëŠë¼ê³  ê³µê°í•˜ëŠ” í¸ì´ë‹¤.",g:"lover"},
        {t:"ë‚˜ëŠ” ì‚¬ë‘ì´ë‚˜ ê°ì •ì„ í‘œí˜„í•˜ëŠ” ë° ì£¼ì €í•¨ì´ ì—†ë‹¤.",g:"lover"},
        {t:"ì˜ˆìˆ , ìŒì•…, ë¬¸í•™ ë“± ê°ì„±ì ì¸ ì·¨í–¥ì´ ë‚˜ì˜ ì •ì²´ì„±ì— í° ì˜í–¥ì„ ì¤€ë‹¤.",g:"lover"},
        {t:"ë‚˜ëŠ” ìƒí™©ì˜ ì´ë©´ì„ ë¶„ì„í•˜ê±°ë‚˜ ê´€ì°°í•˜ëŠ” ê±¸ ì¢‹ì•„í•œë‹¤.",g:"magician"},
        {t:"ë‚˜ëŠ” ì„¸ìƒì´ë‚˜ ì‚¬ëŒì˜ ë³¸ì§ˆì— ëŒ€í•œ í†µì°°ì„ ì–»ëŠ” ê±¸ ì¦ê¸´ë‹¤.",g:"magician"},
        {t:"ë‚˜ëŠ” ì§ì ‘ ê²½í—˜ë³´ë‹¤ ì‚¬ìœ ë‚˜ ìƒìƒ, ìƒˆë¡œìš´ ê´€ì ì„ ì¤‘ì‹œí•˜ëŠ” í¸ì´ë‹¤.",g:"magician"}
      ];
      const bJ = [
        {t:"ë‚˜ëŠ” ììœ¨ì„±ë³´ë‹¤ëŠ” ì±…ì„ê°ì„ ë” ì¤‘ìš”í•˜ê²Œ ì—¬ê¸´ë‹¤.",g:"king"},
        {t:"ë‚˜ëŠ” ê°ì •ì— ë¯¼ê°í•˜ê³  íƒ€ì¸ì˜ ë§ˆìŒì„ ì˜ ëŠë‚€ë‹¤.",g:"lover"},
        {t:"ë‚˜ëŠ” ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ì™€ í†µì°°ì— í° í¥ë¯¸ë¥¼ ëŠë‚€ë‹¤.",g:"magician"}
      ];
      const descJ={
        king:"ğŸ‘‘ ì™•(King)<br>ì±…ì„ê° ìˆê³  ì•ˆì •ì ì¸ ë¦¬ë”í˜•ì…ë‹ˆë‹¤.<br><b>ì¥ì :</b> ì‹ ë¢°ì™€ í—Œì‹ ìœ¼ë¡œ ê´€ê³„ë¥¼ ì•ˆì •ì‹œí‚µë‹ˆë‹¤.",
        warrior:"âš”ï¸ ì „ì‚¬(Warrior)<br>ëª©í‘œì§€í–¥ì ì´ê³  ì‹¤í–‰ë ¥ì´ ë›°ì–´ë‚œ ë„ì „ê°€í˜•ì…ë‹ˆë‹¤.<br><b>ì¥ì :</b> ë³€í™”ë¥¼ ì´ë„ëŠ” ì¶”ì§„ë ¥ê³¼ ì—´ì •.",
        lover:"ğŸ’ ì—°ì¸(Lover)<br>ê°ì„±ì ì´ê³  ê³µê° ëŠ¥ë ¥ì´ ë›°ì–´ë‚œ ì˜ˆìˆ ê°€í˜•ì…ë‹ˆë‹¤.<br><b>ì¥ì :</b> ì„¬ì„¸í•œ ë°°ë ¤, ê¹Šì€ ê°ì • êµë¥˜.",
        magician:"ğŸ§™ ë§ˆë²•ì‚¬(Magician)<br>ì‚¬ìœ  ê¹Šê³  í†µì°°ë ¥ ìˆëŠ” íƒêµ¬ìí˜•ì…ë‹ˆë‹¤.<br><b>ì¥ì :</b> ë…íŠ¹í•œ ê´€ì ê³¼ ì°½ì˜ë ¥."
      };
      const bgJ={ king:"#ffeaa7", warrior:"#dfe6e9", lover:"#f3a683", magician:"#74b9ff" };
      const contQ=document.getElementById('questionsJung');
      qJ.forEach((q,i)=>{
        const d=document.createElement('div'); d.className='question';
        d.innerHTML=`<label>${i+1}. ${q.t}</label>
          <div class="scale-labels"><span>ë§¤ìš° ì•„ë‹ˆë‹¤</span><span>ì•„ë‹ˆë‹¤</span><span>ì¤‘ê°„</span><span>ê·¸ë ‡ë‹¤</span><span>ë§¤ìš° ê·¸ë ‡ë‹¤</span></div>
          <div class="radio-group" data-group="${q.g}">
            <input type="radio" name="qJ${i}" id="qJ${i}_1" value="1" data-group="${q.g}"><label for="qJ${i}_1">1</label>
            <input type="radio" name="qJ${i}" id="qJ${i}_2" value="2" data-group="${q.g}"><label for="qJ${i}_2">2</label>
            <input type="radio" name="qJ${i}" id="qJ${i}_3" value="3" data-group="${q.g}"><label for="qJ${i}_3">3</label>
            <input type="radio" name="qJ${i}" id="qJ${i}_4" value="4" data-group="${q.g}"><label for="qJ${i}_4">4</label>
            <input type="radio" name="qJ${i}" id="qJ${i}_5" value="5" data-group="${q.g}"><label for="qJ${i}_5">5</label>
          </div>`;
        contQ.appendChild(d);
      });
      const contB=document.getElementById('bonusJung');
      bJ.forEach((b,i)=>{
        const d=document.createElement('div'); d.className='question';
        d.innerHTML=`<label>${qJ.length+i+1}. ${b.t}</label>
          <div class="scale-labels"><span>ë§¤ìš° ì•„ë‹ˆë‹¤</span><span>ì•„ë‹ˆë‹¤</span><span>ì¤‘ê°„</span><span>ê·¸ë ‡ë‹¤</span><span>ë§¤ìš° ê·¸ë ‡ë‹¤</span></div>
          <div class="radio-group" data-group="${b.g}">
            <input type="radio" name="bonusJ${i}" id="bonusJ${i}_1" value="1" data-group="${b.g}"><label for="bonusJ${i}_1">1</label>
            <input type="radio" name="bonusJ${i}" id="bonusJ${i}_2" value="2" data-group="${b.g}"><label for="bonusJ${i}_2">2</label>
            <input type="radio" name="bonusJ${i}" id="bonusJ${i}_3" value="3" data-group="${b.g}"><label for="bonusJ${i}_3">3</label>
            <input type="radio" name="bonusJ${i}" id="bonusJ${i}_4" value="4" data-group="${b.g}"><label for="bonusJ${i}_4">4</label>
            <input type="radio" name="bonusJ${i}" id="bonusJ${i}_5" value="5" data-group="${b.g}"><label for="bonusJ${i}_5">5</label>
          </div>`;
        contB.appendChild(d);
      });

      document.getElementById('surveyFormJung').addEventListener('submit',e=>{
        e.preventDefault();
        const s={king:0,warrior:0,lover:0,magician:0};
        document.querySelectorAll('#questionsJung .radio-group input:checked').forEach(i=>s[i.dataset.group]+=+i.value);
        let arr=Object.entries(s).sort((a,b)=>b[1]-a[1]), top=arr.filter(x=>x[1]===arr[0][1]).map(x=>x[0]);
        if(top.length>1){
          const bs={};
          ['king','lover','magician'].forEach(g=>bs[g]=+document.querySelector(`[data-group=${g}] input:checked`)?.value||0);
          top.sort((a,b)=>bs[b]-bs[a]);
        }
        const main=top[0];
        results.jung={type:descJ[main],bg:bgJ[main], key:main};
        results.jungKey=main;
        document.getElementById('restartJung').style.display='block';
        document.querySelector('nav button[data-target="attachment"]').click();
        window.scrollTo({top:0, behavior:'smooth'});
      });
    })();

    // ì• ì°© ìœ í˜• í…ŒìŠ¤íŠ¸ (ì§ˆë¬¸ 12ê°œë¡œ í™•ì¥)
    (function(){
      const qa = [
        {t:"ë‚˜ëŠ” ê°€ê¹Œìš´ ì‚¬ëŒì—ê²Œ ìì£¼ ì—°ë½í•˜ê³  ì‹¶ë‹¤.", g:"anxious"},
        {t:"ë‚˜ëŠ” ê°ì •ì„ ìˆ¨ê¸°ê³  ìŠ¤ìŠ¤ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤.", g:"avoidant"},
        {t:"ë‚˜ëŠ” ì•ˆì •ëœ ê´€ê³„ì—ì„œ í¸ì•ˆí•¨ì„ ëŠë‚€ë‹¤.", g:"secure"},
        {t:"ê±°ë¦¬ê°€ ëŠê»´ì§€ë©´ ë¶ˆì•ˆí•´ì§„ë‹¤.", g:"anxious"},
        {t:"ê°ì • í‘œí˜„ë³´ë‹¤ëŠ” í˜¼ì ìˆëŠ” ê±¸ ì„ í˜¸í•œë‹¤.", g:"avoidant"},
        {t:"ìƒëŒ€ì™€ì˜ ì†”ì§í•œ ëŒ€í™”ê°€ ì¤‘ìš”í•˜ë‹¤.", g:"secure"},
        // ì¶”ê°€ ì§ˆë¬¸ë“¤
        {t:"ìƒëŒ€ê°€ ë‚˜ë¥¼ ë– ë‚ ê¹Œë´ ê±±ì •í•  ë•Œê°€ ë§ë‹¤.", g:"anxious"},
        {t:"í˜¼ìë§Œì˜ ì‹œê°„ì´ ê¼­ í•„ìš”í•˜ë‹¤.", g:"avoidant"},
        {t:"ì„œë¡œ ì‹ ë¢°ê°€ ìŒ“ì´ë©´ ë‹¤íˆ¼ì´ ìƒê²¨ë„ ê¸ˆë°© íšŒë³µí•  ìˆ˜ ìˆë‹¤.", g:"secure"},
        {t:"ì‚¬ë‘ë°›ê³  ìˆìŒì„ ìì£¼ í™•ì¸ ë°›ê³  ì‹¶ë‹¤.", g:"anxious"},
        {t:"ìƒëŒ€ë°©ì´ ê°ì •ì ìœ¼ë¡œ ë‹¤ê°€ì˜¤ë©´ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤.", g:"avoidant"},
        {t:"ë§ˆìŒì„ í‘œí˜„í•  ë•Œ, ìƒëŒ€ë¥¼ ë¨¼ì € ë°°ë ¤í•˜ë ¤ í•œë‹¤.", g:"secure"}
      ];
      const descA = {
        anxious: "ğŸ˜° ë¶ˆì•ˆí˜•<br>ê°€ê¹Œì›€ì— ëŒ€í•œ ìš•êµ¬ê°€ ê°•í•˜ë©°, ê´€ê³„ì—ì„œ ê³¼ë„í•œ ê±±ì •ì„ í•©ë‹ˆë‹¤.<br><b>ì¥ì :</b> ì‘ì€ ë³€í™”ì—ë„ ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•˜ì—¬ ì„¸ì‹¬í•œ ë°°ë ¤ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.",
        avoidant: "ğŸ¤ íšŒí”¼í˜•<br>ë…ë¦½ì ì´ê³  ê°ì • í‘œí˜„ì„ ìì œí•˜ë©°, ë•Œë•Œë¡œ ê±°ë¦¬ë¥¼ ë‘¡ë‹ˆë‹¤.<br><b>ì¥ì :</b> ê°ì •ì— í”ë“¤ë¦¬ì§€ ì•Šê³  ìê¸°ë§Œì˜ ì‹œê°„ì„ ì†Œì¤‘íˆ ì—¬ê¹ë‹ˆë‹¤.",
        secure: "ğŸ˜Œ ì•ˆì •í˜•<br>ì‹ ë¢°ì™€ ì†Œí†µì„ ê¸°ë°˜ìœ¼ë¡œ í¸ì•ˆí•œ ê´€ê³„ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.<br><b>ì¥ì :</b> ê°ˆë“±ì—ë„ ì¹¨ì°©í•˜ê²Œ ì†Œí†µí•˜ë©° ê°ì •ì„ ê· í˜• ìˆê²Œ ì¡´ì¤‘í•©ë‹ˆë‹¤."
      };
      const bgA = { anxious: "#fab1a0", avoidant: "#b2bec3", secure: "#55efc4" };
      const cont = document.getElementById('questionsAttach');
      qa.forEach((q,i) => {
        const d = document.createElement('div'); d.className='question';
        d.innerHTML = `<label>${i+1}. ${q.t}</label>
          <div class="scale-labels"><span>ë§¤ìš° ì•„ë‹ˆë‹¤</span><span>ì•„ë‹ˆë‹¤</span><span>ì¤‘ê°„</span><span>ê·¸ë ‡ë‹¤</span><span>ë§¤ìš° ê·¸ë ‡ë‹¤</span></div>
          <div class="radio-group" data-group="${q.g}">
            <input type="radio" name="qA${i}" id="qA${i}_1" value="1" data-group="${q.g}"><label for="qA${i}_1">1</label>
            <input type="radio" name="qA${i}" id="qA${i}_2" value="2" data-group="${q.g}"><label for="qA${i}_2">2</label>
            <input type="radio" name="qA${i}" id="qA${i}_3" value="3" data-group="${q.g}"><label for="qA${i}_3">3</label>
            <input type="radio" name="qA${i}" id="qA${i}_4" value="4" data-group="${q.g}"><label for="qA${i}_4">4</label>
            <input type="radio" name="qA${i}" id="qA${i}_5" value="5" data-group="${q.g}"><label for="qA${i}_5">5</label>
          </div>`;
        cont.appendChild(d);
      });
      document.getElementById('surveyFormAttach').addEventListener('submit', e => {
        e.preventDefault();
        const s = { anxious:0, avoidant:0, secure:0 };
        document.querySelectorAll('#questionsAttach .radio-group input:checked')
          .forEach(r => s[r.dataset.group] += +r.value);
        const main = Object.entries(s).sort((a,b)=>b[1]-a[1])[0][0];
        results.attachment = { type:descA[main], bg:bgA[main], key:main };
        results.attachKey=main;
        document.getElementById('restartAttach').style.display='block';
        document.querySelector('nav button[data-target="color"]').click();
        window.scrollTo({top:0, behavior:'smooth'});
      });
    })();

    // ìƒ‰ê¹” ê¶í•© ëª¨ë“ˆ
    (function(){
      const colors=[
        {id:'red',name:'ë¹¨ê°•',hex:'#e74c3c'},
        {id:'orange',name:'ì£¼í™©',hex:'#e67e22'},
        {id:'yellow',name:'ë…¸ë‘',hex:'#f1c40f'},
        {id:'green',name:'ì´ˆë¡',hex:'#2ecc71'},
        {id:'blue',name:'íŒŒë‘',hex:'#3498db'},
        {id:'navy',name:'ë‚¨ìƒ‰',hex:'#2c3e50'},
        {id:'purple',name:'ë³´ë¼',hex:'#9b59b6'},
        {id:'pink',name:'í•‘í¬',hex:'#fd79a8'},
        {id:'sky',name:'í•˜ëŠ˜ìƒ‰',hex:'#74b9ff'}
      ];
      const compat={
        warm_warm:{
          desc:'ë‘ ì‚¬ëŒ ëª¨ë‘ í™œê¸°ì°¬ ìƒ‰ì˜ ë§Œë‚¨, ì—´ì • ê°€ë“í•œ ì¡°í•©ì…ë‹ˆë‹¤.',
          tip:'í•¨ê»˜ ìƒˆë¡œìš´ ë„ì „ì„ ì‹œë„í•´ë³´ì„¸ìš”. ì„œë¡œì˜ ì—´ì •ì„ ê³µìœ í•˜ë©´ í° ì‹œë„ˆì§€ê°€ ë‚©ë‹ˆë‹¤!'
        },
        warm_cool:{
          desc:'ë”°ëœ»í•¨ê³¼ ì‹œì›í•¨ì˜ ì¡°í™”, ê· í˜• ì¡íŒ ê´€ê³„ì…ë‹ˆë‹¤.',
          tip:'ì„±í–¥ì˜ ì°¨ì´ê°€ ì˜¤íˆë ¤ ì¥ì ! ì„œë¡œ ë‹¤ë¥¸ ê´€ì ì—ì„œ ì„±ì¥í•  ìˆ˜ ìˆì–´ìš”.'
        },
        cool_cool:{
          desc:'ì°¨ë¶„í•¨ê³¼ ì•ˆì •ê°ì˜ ê³µê°, í¸ì•ˆí•œ ê´€ê³„ì…ë‹ˆë‹¤.',
          tip:'ì„œë¡œë¥¼ í¸ì•ˆí•˜ê²Œ í•´ì£¼ëŠ” ì¡°í•©, ì‹¬ë¦¬ì  ì•ˆì •ê°ì´ í½ë‹ˆë‹¤.'
        },
        pastel_pastel:{
          desc:'ë¶€ë“œëŸ½ê³  ë‹¬ì½¤í•œ ìƒ‰ì˜ í–¥ì—°, ë¡œë§¨í‹±í•œ ì¼€ë¯¸ì…ë‹ˆë‹¤.',
          tip:'ê°ì„±ì  ëŒ€í™”ì™€ ì·¨ë¯¸ë¡œ ì„œë¡œì˜ ê°ì •ì„ í’ë¶€í•˜ê²Œ ì±„ì›Œë³´ì„¸ìš”.'
        },
        warm_pastel:{
          desc:'ê°•ë ¬í•¨ê³¼ ë¶€ë“œëŸ¬ì›€ì˜ ë§Œë‚¨, ìƒë™ê° ìˆëŠ” ì¡°í•©ì…ë‹ˆë‹¤.',
          tip:'ì„œë¡œì˜ ê°œì„±ì„ ì¡´ì¤‘í•˜ë©°, í™œë™ì ì¸ ì¼ì •ê³¼ ë¡œë§¨í‹±í•œ ìˆœê°„ì„ ë²ˆê°ˆì•„ ì¦ê¸°ë©´ ë² ìŠ¤íŠ¸!'
        },
        cool_pastel:{
          desc:'ì‹œì›í•¨ê³¼ ë¶€ë“œëŸ¬ì›€ì˜ ì¡°í™”, ë‹¬ì½¤í•˜ë©´ì„œë„ ì•ˆì •ì ì¸ ê´€ê³„ì…ë‹ˆë‹¤.',
          tip:'ì°¨ë¶„í•¨ê³¼ ë‹¤ì •í•¨ì´ ë§Œë‚œ ì¡°í™”, ì„¬ì„¸í•œ ë°°ë ¤ê°€ ê´€ê³„ì˜ ë§¤ë ¥ì„ ë†’ì—¬ì¤ë‹ˆë‹¤.'
        }
      };
      function warm(id){
        if(['red','orange','yellow'].includes(id))return 'warm';
        if(['blue','navy','green'].includes(id))return 'cool';
        return 'pastel';
      }
      const myG=document.getElementById('myColorGroup'),idealG=document.getElementById('idealColorGroup');
      colors.forEach(c=>
        [myG,idealG].forEach(g=>{
          const i=document.createElement('input');i.type='radio';i.id=g.id+'_'+c.id;i.name=g.id;i.value=c.id;
          const l=document.createElement('label');l.htmlFor=i.id;l.innerText=c.name;l.style.background=c.hex;l.style.color='#fff';g.appendChild(i);g.appendChild(l);
        })
      );
      document.getElementById('surveyFormColor').addEventListener('submit',e=>{
        e.preventDefault();
        const my=document.querySelector('input[name=myColorGroup]:checked')?.value,
              ideal=document.querySelector('input[name=idealColorGroup]:checked')?.value;
        if(!my||!ideal)return alert('ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”');
        const m=colors.find(c=>c.id===my),i=colors.find(c=>c.id===ideal),key=warm(my)+'_'+warm(ideal),d=compat[key]||compat['warm_pastel'];
        results.color={my:m.name,ideal:i.name,desc:d.desc,tip:d.tip,bg:`linear-gradient(to right, ${m.hex}, ${i.hex})`};
        document.getElementById('restartColor').style.display='block';
        document.querySelector('nav button[data-target="summary"]').click();
        window.scrollTo({top:0, behavior:'smooth'});
      });
    })();

    // ìµœì¢… ê²°ê³¼ í‘œì‹œ
    function showSummary(){
      const div=document.getElementById('summaryResult');
      if(!results.jung||!results.attachment||!results.color){
        div.innerHTML='<p>ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ ì™„ë£Œí•˜ì„¸ìš”.</p>';return;
      }
      let jungType = results.jungKey;
      let attachType = results.attachKey;
      let jungMsg = {
        king: "ë‹¹ì‹ ì€ ì¡°ì§ì´ë‚˜ ê°€ì¡±ì—ì„œ ì¤‘ì‹¬ì„ ì¡ì•„ì£¼ëŠ” ë¯¿ìŒì§í•œ ë¦¬ë”í˜•(ğŸ‘‘ ì™•)ì…ë‹ˆë‹¤.",
        warrior: "ë‹¹ì‹ ì€ ë„ì „ê³¼ ì‹¤í–‰ì„ ì¦ê¸°ëŠ” ì—´ì •ì ì¸ ì‹¤í–‰ê°€í˜•(âš”ï¸ ì „ì‚¬)ì…ë‹ˆë‹¤.",
        lover: "ë‹¹ì‹ ì€ ê°ì • êµë¥˜ì™€ ë°°ë ¤ë¥¼ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ê°ì„±ê°€í˜•(ğŸ’ ì—°ì¸)ì…ë‹ˆë‹¤.",
        magician: "ë‹¹ì‹ ì€ ì°½ì˜ì ì´ê³  í†µì°°ë ¥ ìˆëŠ” ì•„ì´ë””ì–´ ë±…í¬(ğŸ§™ ë§ˆë²•ì‚¬)ì…ë‹ˆë‹¤."
      }[jungType];
      let attachMsg = {
        secure: "ì•ˆì •ì ì´ê³  ì‹ ë¢° ê¸°ë°˜ì˜ ê´€ê³„ë¥¼ ì„ í˜¸í•˜ëŠ” ì•ˆì •í˜•(ğŸ˜Œ)ì…ë‹ˆë‹¤.",
        anxious: "ê°€ê¹Œì›€ì„ ì¤‘ì‹œí•˜ê³  ì• ì • í™•ì¸ì´ í•„ìš”í•œ ë¶ˆì•ˆí˜•(ğŸ˜°)ì…ë‹ˆë‹¤.",
        avoidant: "ë…ë¦½ì ì´ê³  ê±°ë¦¬ë¥¼ ë‘ëŠ” ê²ƒì„ í¸ì•ˆí•´ í•˜ëŠ” íšŒí”¼í˜•(ğŸ¤)ì…ë‹ˆë‹¤."
      }[attachType];
      let bestType = jungMatch[jungType].best;
      let bestWhy = jungMatch[jungType].reason;
      let bestAttach = attachMatch[attachType].best;
      let bestAttachWhy = attachMatch[attachType].reason;

      div.innerHTML=`
        <div class="result-deck">
        <div class="result-card" style="background:${results.jung.bg}">
          <div class="card-icon">ğŸŒ€</div>
          <h3>ë‚˜ì˜ ì›í˜• ì‹¬ë¦¬</h3>
          <div class="type-em">${jungMsg}</div>
          <div class="type-info"> <b>ì‹¬ë¦¬ì  ê°•ì :</b><br> ${results.jung.type}</div>
        </div>
        <div class="result-card" style="background:${results.attachment.bg}">
          <div class="card-icon">ğŸ”—</div>
          <h3>ë‚˜ì˜ ì• ì°© ìœ í˜•</h3>
          <div class="type-em">${attachMsg}</div>
          <div class="type-info"> <b>ëŒ€ì¸ê´€ê³„ ê°•ì :</b><br> ${results.attachment.type}</div>
        </div>
        <div class="result-card" style="background:${results.color.bg}">
          <div class="card-icon">ğŸ¨</div>
          <h3>ìƒ‰ê¹” ê¶í•©</h3>
          <div class="type-em">ë‚˜: ${results.color.my} &nbsp;ï½œ&nbsp; ì´ìƒí˜•: ${results.color.ideal}</div>
          <ul>
            <li>ê¶í•©: <b>${results.color.desc}</b></li>
            <li>ğŸ’¡ <span>${results.color.tip}</span></li>
          </ul>
        </div>
        </div>
        <div class="final-msg">
          <span style="font-size:1.23em;">ğŸ’¡ <b>ë‚˜ì˜ ê²°í˜¼ ê¶í•© ì´í‰</b></span><br><br>
          <b>ì„±í–¥ ê¶í•©:</b> <span class="type-good">${bestType}</span> íƒ€ì…ì´ ì˜ ë§ì•„ìš”.<br>
          <span style="color:#676686; font-size:0.98em;">${bestWhy}</span><br><br>
          <b>ì• ì°© ê¶í•©:</b> <span class="type-good">${bestAttach}</span> ìœ í˜•ì´ ë² ìŠ¤íŠ¸!<br>
          <span style="color:#676686; font-size:0.98em;">${bestAttachWhy}</span>
        </div>
      `;
    }
    document.querySelector('nav button[data-target="summary"]').addEventListener('click', showSummary);
    document.getElementById('resetAll').addEventListener('click', ()=>location.reload());
  </script>
</body>
</html>
